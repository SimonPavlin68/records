{% extends "base.html" %}
{% block content %}

<h1>Nastavitve</h1>
<hr>

<!-- Nav Tabs -->
<!-- Nav Tabs -->
<ul class="nav nav-tabs" id="nastavitveTabs" role="tablist">

  <li class="nav-item">
    <a class="nav-link {% if request.args.get('tab', 'competition') == 'competition' %}active{% endif %}"
       id="competition-tab"
       data-toggle="tab"
       href="#competition"
       role="tab">
       Disciplina
    </a>
  </li>

  <li class="nav-item">
    <a class="nav-link {% if request.args.get('tab') == 'style' %}active{% endif %}"
       id="style-tab"
       data-toggle="tab"
       href="#style"
       role="tab">
       Stil
    </a>
  </li>

  <li class="nav-item">
    <a class="nav-link {% if request.args.get('tab') == 'category' %}active{% endif %}"
       id="category-tab"
       data-toggle="tab"
       href="#category"
       role="tab">
       Kategorije
    </a>
  </li>
    <li class="nav-item">
      <a class="nav-link {% if request.args.get('tab') == 'subcategory' %}active{% endif %}"
         id="subcategory-tab"
         data-toggle="tab"
         href="#subcategory"
         role="tab">
         Podkategorije
      </a>
    </li>
<li class="nav-item">
  <a class="nav-link {% if request.args.get('tab') == 'competition_subtype' %}active{% endif %}"
     id="competition-subtype-tab"
     data-toggle="tab"
     href="#competition_subtype"
     role="tab">
     Podtipi tekmovanja
  </a>
</li>

</ul>



<!-- Tab Content -->
<div class="tab-content mt-3">

  <!-- =====================
       Tab 1: CompetitionType
       ===================== -->
  <!--div class="tab-pane fade show active" id="competition" role="tabpanel"-->
  <div class="tab-pane fade {% if request.args.get('tab', 'competition') == 'competition' %} show active {% endif %} " id="competition" role="tabpanel">

    <!-- New Button -->
    <div class="mb-3">
        <button class="btn btn-success" data-toggle="modal" data-target="#newCompetitionModal">
            + Dodaj disciplino
        </button>
    </div>

    <!-- Tabela CompetitionType -->
    <div style="max-width: 500px;">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>ID</th>
                <th>Ime</th>
                <th>Akcija</th>
            </tr>
        </thead>
        <tbody>
        {% for item in competition_items %}
            <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.name }}</td>
                <td>
                    <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editCompetitionModal" data-id="{{ item.id }}" data-name="{{ item.name }}">Uredi</button>
                    <button class="btn btn-sm btn-danger" data-toggle="modal" data-target="#competitionDeleteModal" data-id="{{ item.id }}" data-name="{{ item.name }}">Briši</button>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    </div>

  </div>

  <!-- =====================
       Tab 2: Style
       ===================== -->
  <!--div class="tab-pane fade" id="style" role="tabpanel"-->
  <div class="tab-pane fade {% if request.args.get('tab') == 'style' %} show active {% endif %} " id="style" role="tabpanel">

    <!-- New Button -->
    <div class="mb-3">
        <button class="btn btn-success" data-toggle="modal" data-target="#newStyleModal">
            + Dodaj stil
        </button>
    </div>

    <!-- Tabela Style -->
    <div style="max-width: 500px;">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>ID</th>
                <th>Ime</th>
                <th>Akcija</th>
            </tr>
        </thead>
        <tbody>
        {% for item in style_items %}
            <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.name }}</td>
                <td>
                    <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editStyleModal" data-id="{{ item.id }}" data-name="{{ item.name }}">Uredi</button>
                    <button class="btn btn-sm btn-danger" data-toggle="modal" data-target="#styleDeleteModal" data-id="{{ item.id }}" data-name="{{ item.name }}">Briši</button>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    </div>

  </div>

<div class="tab-pane fade {% if request.args.get('tab') == 'category' %}show active{% endif %}" id="category" role="tabpanel">
<!-- New Button -->
  <div class="mb-3">
    <button class="btn btn-success"
            data-toggle="modal"
            data-target="#categoryNewModal">
      + Dodaj kategorijo
    </button>
  </div>
  <div style="max-width: 500px;" class="mt-3">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>ID</th>
          <th>Ime</th>
          <th>Spol</th>
          <th>Akcija</th>
        </tr>
      </thead>
      <tbody>
      {% for item in category_items %}
        <tr>
          <td>{{ item.id }}</td>
          <td>{{ item.name }}</td>
          <td>{{ item.gender.name }}</td>
          <td>
            <button class="btn btn-sm btn-primary"
          data-toggle="modal"
          data-target="#categoryEditModal"
          data-id="{{ item.id }}"
          data-name="{{ item.name }}"
          data-gender="{{ item.gender_id }}">
    Uredi
  </button>

  <button class="btn btn-sm btn-danger"
          data-toggle="modal"
          data-target="#categoryDeleteModal"
          data-id="{{ item.id }}"
          data-name="{{ item.name }}">
    Briši
  </button>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

</div>
    <div class="tab-pane fade {% if request.args.get('tab') == 'subcategory' %} show active{% endif %}" id="subcategory" role="tabpanel">

  <!-- New Button -->
  <div class="mb-3">
    <button class="btn btn-success"
            data-toggle="modal"
            data-target="#newSubCategoryModal">
      + Dodaj podkategorijo
    </button>
  </div>

  <!-- Tabela SubCategories -->
  <div style="max-width: 500px;" class="mt-3">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>ID</th>
          <th>Ime</th>
          <th>Akcija</th>
        </tr>
      </thead>
      <tbody>
      {% for item in subcategory_items %}
        <tr>
          <td>{{ item.id }}</td>
          <td>{{ item.name }}</td>
          <td>
            <button class="btn btn-sm btn-primary"
                    data-toggle="modal"
                    data-target="#editSubCategoryModal"
                    data-id="{{ item.id }}"
                    data-name="{{ item.name }}">
              Uredi
            </button>

            <button class="btn btn-sm btn-danger"
                    data-toggle="modal"
                    data-target="#subCategoryDeleteModal"
                    data-id="{{ item.id }}"
                    data-name="{{ item.name }}">
              Briši
            </button>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

</div>
<!-- Tab Content -->
<div class="tab-pane fade {% if request.args.get('tab') == 'competition_subtype' %}show active{% endif %}" id="competition_subtype" role="tabpanel">

  <!-- New Button -->
  <div class="mb-3">
      <button class="btn btn-success" data-toggle="modal" data-target="#newCompetitionSubTypeModal">
          + Dodaj podtip tekmovanja
      </button>
  </div>

  <!-- Tabela CompetitionSubType -->
  <div style="max-width: 800px;">
      <table class="table table-striped table-hover">
          <thead>
              <tr>
                  <th>ID</th>
                  <th>Ime</th>
                  <th>Tip tekmovanja</th>
                  <th>Število puščic</th>
                  <th>Akcija</th>
              </tr>
          </thead>
          <tbody>
          {% for item in competition_subtype_items %}
              <tr>
                  <td>{{ item.id }}</td>
                  <td>{{ item.name }}</td>
                  <td>{{ item.competition_type.name }}</td>
                  <td>{{ item.arrows }}</td>
                  <td>
                      <button
                          class="btn btn-sm btn-primary"
                          data-toggle="modal"
                          data-target="#editCompetitionSubTypeModal"
                          data-id="{{ item.id }}"
                          data-name="{{ item.name }}"
                          data-competition-type-id="{{ item.competition_type_id }}"
                          data-arrows="{{ item.arrows }}">
                          Uredi
                      </button>
                      <button class="btn btn-sm btn-danger"
                              data-toggle="modal"
                              data-target="#competitionSubTypeDeleteModal"
                              data-id="{{ item.id }}"
                              data-name="{{ item.name }}">
                        Briši
                      </button>
                  </td>
              </tr>
          {% endfor %}
          </tbody>
      </table>
  </div>

</div>

</div>

<!-- =====================
     Modal windows
     ===================== -->

<!-- CompetitionType New/Edit/Delete modali (isti kot prej) -->
{% include 'modals/competition_type_modals.html' %}

{% include 'modals/competition_subtype_modals.html' %}

<!-- Style New/Edit/Delete modali -->
{% include 'modals/style_modals.html' %}

<!-- JS za modals logic (duplicates, action, etc.) -->
{% include 'modals/modal_logic.html' %}

{% include 'modals/category_modals.html' %}

{% include 'modals/sub_categories_modals.html' %}


{% endblock %}
