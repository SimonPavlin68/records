<!DOCTYPE html>
<html lang="sl">
<head>
<meta charset="UTF-8">
<title>Najboljši rezultati</title>
<style>
{{ css_content | safe }}
</style>
</head>
<body>
{% for style_name in styles %}

<table style="width:100%; border-collapse:collapse; margin-bottom:10px; page-break-before: always;">
  <tr>
    <!-- Tekstni del -->
    <td style="width:90%; text-align:left; vertical-align:middle; padding-left:10px;">
      <h1 style="margin:0; font-size:20px;">NAJBOLJŠI REZULTATI</h1>
      <h2 style="margin:0; font-size:18px; background:#c0c0c0; padding:5px;">Poljsko</h2>
      <h3 style="margin:0; font-size:16px;">{{ style_name }}</h3>
    </td>

    <!-- Logo -->
    <td style="width:10%; text-align:right; vertical-align:middle; padding-right:10px;">
      <img src="data:image/png;base64,{{ logo_base64 }}" alt="Logo" style="width:100%;">
    </td>
  </tr>
</table>
<hr/>

<table class="records">
<thead>
<tr>
  <th></th>
  <th>puščic</th>
  <th>lice</th>
  <th>rekord</th>
  <th>priimek in ime</th>
  <th>klub</th>
  <th>kraj</th>
  <th>datum</th>
</tr>
</thead>

<tbody>
{% for category, subcats in grouped_results[style_name].items() %}
  {% for subcategory, records in subcats.items() %}
    <tr class="category-row">
      <td colspan="8"><strong>{{ category }}</strong></td>
    </tr>
    <tr class="subcategory-row">
      <td colspan="8">{{ subcategory }}</td>
    </tr>
    {% for r in records %}
    <tr class="data-row">
      <td>{{ r.competition_subtype.name if r.competition_subtype else '—' }}</td>
      <td>{{ r.competition_subtype.arrows if r.competition_subtype else '—' }}</td>
      <td>{{ r.competition_subtype.lice if r.competition_subtype else '—' }}</td>
      <td><strong>{{ r.result }}</strong></td>
      <td>{{ r.competitor_name }}</td>
      <td>{{ r.club or '—' }}</td>
      <td>{{ r.location or '—' }}</td>
      <td>{{ r.date.strftime("%d.%m.%Y") }}</td>
    </tr>
    {% endfor %}
  {% endfor %}
{% endfor %}
</tbody>
</table>
{% endfor %}
</body>
</html>
